<button class="back-btn" (click)="goBack()" aria-label="Назад">
  ←
</button>

<div class="product-detail" *ngIf="product as p; else notFound">
  <!-- Основное изображение -->
  <div class="main-image-container">
    <button class="nav-btn prev" (click)="prevImage()" *ngIf="p.images.length > 1">
      ‹
    </button>

    <img
      [src]="p.images[currentImageIndex]"
      [alt]="p.name"
      class="main-image" />

    <button class="nav-btn next" (click)="nextImage()" *ngIf="p.images.length > 1">
      ›
    </button>
  </div>

  <!-- Миниатюры -->
  <div class="thumbnails" *ngIf="p.images.length > 1">
    <img
      *ngFor="let image of p.images; let i = index"
      [src]="image"
      [alt]="'Изображение ' + (i + 1)"
      class="thumbnail"
      [class.active]="i === currentImageIndex"
      (click)="selectImage(i)" />
  </div>

  <!-- Инфо -->
  <div class="detail-info">
    <h1>{{ p.name }}</h1>
    <p class="price">{{ p.price | number }} {{ p.currency }}</p>
    <p class="description">{{ p.description }}</p>
    <a [href]="p.buyLink" target="_blank" class="buy-button">Купить в VK</a>
  </div>
</div>

<ng-template #notFound>
  <div class="not-found">Товар не найден</div>
</ng-template>
